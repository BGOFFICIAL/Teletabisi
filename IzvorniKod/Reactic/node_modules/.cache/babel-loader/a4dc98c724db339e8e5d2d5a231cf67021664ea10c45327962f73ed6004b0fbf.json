{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\npral\\\\OneDrive\\\\Dokumenti\\\\GitHub\\\\Teletabisi\\\\IzvorniKod\\\\Reactic\\\\src\\\\services\\\\navigate.js\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport LogOut from './LogOut';\nimport { jwtDecode } from 'jwt-decode';\nimport { useLocalState } from '../util/useLocalStorage';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction UseGetRoleFromJWT(jwtpom) {\n  if (jwtpom) {\n    const decoded = jwtDecode(jwtpom);\n    console.log(decoded.authorities);\n    return decoded.roles[0].authority;\n  } else {\n    return null;\n  }\n}\n_c = UseGetRoleFromJWT;\nfunction Waiter(lokacija) {\n  if (window.location.pathname !== lokacija) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"Loading...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 25,\n    columnNumber: 10\n  }, this);\n}\n_c2 = Waiter;\nfunction Navigation(jwt) {\n  _s();\n  const [roles, setRoles] = useLocalState(UseGetRoleFromJWT);\n  if (jwt) {\n    try {\n      const role = UseGetRoleFromJWT(jwt);\n      if (role === \"ADMIN\") {\n        window.location.href = \"/admin\";\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          children: \"Loading....\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 20\n        }, this);\n      } else if (role === \"USER\") {\n        window.location.href = \"/user\";\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          children: \"Loading....\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 20\n        }, this);\n      } else if (role === \"EMPLOYEE\") {\n        window.location.href = \"/employee\";\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          children: \"Loading....\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 20\n        }, this);\n      } else {\n        if (window.location.pathname !== \"/login\" || window.location.pathname !== \"/register\" || window.location.pathname !== \"/welcome\") {\n          window.location.href = \"/welcome\";\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            children: \"Loading....\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 20\n          }, this);\n        }\n      }\n    } catch (error) {\n      LogOut();\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"Loading....\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 18\n      }, this);\n    }\n    ;\n  }\n}\n_s(Navigation, \"s60GzSrGClkbPaZpvR648ar8bT4=\", false, function () {\n  return [useLocalState];\n});\n_c3 = Navigation;\nexport { Navigation, Waiter };\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"UseGetRoleFromJWT\");\n$RefreshReg$(_c2, \"Waiter\");\n$RefreshReg$(_c3, \"Navigation\");","map":{"version":3,"names":["React","LogOut","jwtDecode","useLocalState","jsxDEV","_jsxDEV","UseGetRoleFromJWT","jwtpom","decoded","console","log","authorities","roles","authority","_c","Waiter","lokacija","window","location","pathname","children","fileName","_jsxFileName","lineNumber","columnNumber","_c2","Navigation","jwt","_s","setRoles","role","href","error","_c3","$RefreshReg$"],"sources":["C:/Users/npral/OneDrive/Dokumenti/GitHub/Teletabisi/IzvorniKod/Reactic/src/services/navigate.js"],"sourcesContent":["import React from 'react';\r\nimport LogOut from './LogOut';\r\nimport { jwtDecode } from 'jwt-decode';\r\nimport { useLocalState} from '../util/useLocalStorage';\r\n\r\n\r\n\r\n\r\n\r\nfunction UseGetRoleFromJWT(jwtpom) {\r\n  if (jwtpom) {\r\n    const decoded = jwtDecode(jwtpom);\r\n    console.log(decoded.authorities);\r\n\r\n    return decoded.roles[0].authority;\r\n  }\r\n  else {\r\n    return null;\r\n  }\r\n}\r\n\r\n\r\nfunction Waiter(lokacija) {\r\n  if(window.location.pathname !== lokacija)\r\n  return <div>Loading...</div>\r\n}\r\n\r\n\r\nfunction Navigation(jwt) {\r\n  \r\n\r\n  \r\n  const [roles, setRoles] = useLocalState(UseGetRoleFromJWT);\r\n\r\n\r\n\r\n    if (jwt) {\r\n      \r\n      \r\n        try {\r\n          const role = UseGetRoleFromJWT(jwt);\r\n          \r\n    \r\n          if (role=== \"ADMIN\") {\r\n            window.location.href = \"/admin\";\r\n\r\n\r\n            return <div>Loading....</div>\r\n          }\r\n          else if (role=== \"USER\") {\r\n            window.location.href = \"/user\";\r\n\r\n\r\n            return <div>Loading....</div>\r\n          }\r\n    \r\n          else if(role=== \"EMPLOYEE\"){\r\n            window.location.href = \"/employee\";\r\n\r\n\r\n            return <div>Loading....</div>\r\n          }\r\n\r\n         else{\r\n          if(window.location.pathname !== \"/login\" || window.location.pathname !== \"/register\" || window.location.pathname !== \"/welcome\" ){\r\n            window.location.href = \"/welcome\";\r\n\r\n\r\n            return <div>Loading....</div>}\r\n          }\r\n    \r\n    \r\n        } catch (error) {\r\n          LogOut();\r\n          return <div>Loading....</div>\r\n        };\r\n      }\r\n     \r\n      }\r\n\r\n\r\nexport {Navigation,Waiter};"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}