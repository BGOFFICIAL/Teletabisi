{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\npral\\\\OneDrive\\\\Dokumenti\\\\GitHub\\\\Teletabisi\\\\IzvorniKod\\\\Reactic\\\\src\\\\services\\\\navigate.js\";\nimport React from 'react';\nimport LogOut from './LogOut';\nimport { jwtDecode } from 'jwt-decode';\nimport { useLocalState } from '../util/useLocalStorage';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Navigacija(jwt) {\n  try {\n    if (jwt) {\n      const decoded = jwtDecode(jwt);\n      const roles = decoded.roles;\n      if (roles && roles.length > 0) {\n        const role = roles[0];\n        localStorage.setItem(\"roles\", role);\n        console.log(\"role :\" + role);\n      } else {\n        console.log(\"No roles found in token\");\n        localStorage.setItem(\"roles\", \"no role\"); // remove roles from localStorage\n      }\n    } else {\n      localStorage.setItem(\"roles\", \"no role\"); // remove roles from localStorage\n    }\n    console.log(\"roles:\" + localStorage.getItem(\"roles\"));\n    console.log(\"path:\" + window.location.pathname);\n    if (localStorage.getItem(\"roles\") === \"ADMIN\" && window.location.pathname !== \"/admin\") {\n      window.location.href = \"/admin\";\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"Loading....\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 20\n      }, this);\n    }\n    if (localStorage.getItem(\"roles\") === \"USER\" && (window.location.pathname !== \"/user\" || window.location.pathname === \"/welcome\")) {\n      window.location.href = \"/user\";\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"Loading....\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 20\n      }, this);\n    }\n    if (localStorage.getItem(\"roles\") === \"EMPLOYEE\" && window.location.pathname !== \"/employee\") {\n      window.location.href = \"/employee\";\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"Loading....\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 20\n      }, this);\n    }\n    if (localStorage.getItem(\"roles\") !== \"USER\" && localStorage.getItem(\"roles\") !== \"EMPLOYEE\" && localStorage.getItem(\"roles\") !== \"ADMIN\" && window.location.pathname !== \"/login\" && window.location.pathname !== \"/register\" && window.location.pathname !== \"/welcome\") {\n      window.location.href = \"/welcome\";\n      localStorage.setItem(\"jwt\", \"\");\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"Loading....\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 20\n      }, this);\n    }\n  } catch (error) {\n    localStorage.setItem(\"jwt\", \"\");\n    console.log(\"errorcina\");\n  }\n}\n_c = Navigacija;\nexport default Navigacija;\nvar _c;\n$RefreshReg$(_c, \"Navigacija\");","map":{"version":3,"names":["React","LogOut","jwtDecode","useLocalState","jsxDEV","_jsxDEV","Navigacija","jwt","decoded","roles","length","role","localStorage","setItem","console","log","getItem","window","location","pathname","href","children","fileName","_jsxFileName","lineNumber","columnNumber","error","_c","$RefreshReg$"],"sources":["C:/Users/npral/OneDrive/Dokumenti/GitHub/Teletabisi/IzvorniKod/Reactic/src/services/navigate.js"],"sourcesContent":["import React from 'react';\r\nimport LogOut from './LogOut';\r\nimport { jwtDecode } from 'jwt-decode';\r\nimport { useLocalState} from '../util/useLocalStorage';\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nfunction Navigacija(jwt) {\r\n  \r\n\r\n  \r\n  try{\r\n\r\n\r\n    if (jwt) {\r\n          const decoded = jwtDecode(jwt);\r\n          const roles = decoded.roles;\r\n\r\n          if(roles && roles.length > 0){\r\n            const role = roles[0];\r\n            localStorage.setItem(\"roles\", role);\r\n            console.log(\"role :\" + role);\r\n          } else{\r\n            console.log(\"No roles found in token\");\r\n            localStorage.setItem(\"roles\",\"no role\"); // remove roles from localStorage\r\n          } \r\n        } else{\r\n            localStorage.setItem(\"roles\",\"no role\"); // remove roles from localStorage\r\n          }\r\n          \r\n          console.log(\"roles:\" + localStorage.getItem(\"roles\"));\r\n          console.log(\"path:\" + window.location.pathname);\r\n    \r\n          if (localStorage.getItem(\"roles\")=== \"ADMIN\" && window.location.pathname !== \"/admin\") {\r\n            window.location.href = \"/admin\";\r\n\r\n\r\n            return <div>Loading....</div>\r\n          }\r\n          if (localStorage.getItem(\"roles\")=== \"USER\" && (window.location.pathname !== \"/user\" || window.location.pathname === \"/welcome\") ) {\r\n            window.location.href = \"/user\";\r\n\r\n\r\n            return <div>Loading....</div>\r\n          }\r\n    \r\n          if(localStorage.getItem(\"roles\")=== \"EMPLOYEE\" && window.location.pathname !== \"/employee\"){\r\n            window.location.href = \"/employee\";\r\n\r\n\r\n            return <div>Loading....</div>\r\n          }\r\n\r\n\r\n          \r\n\r\n         if((localStorage.getItem(\"roles\")!==\"USER\" && localStorage.getItem(\"roles\")!==\"EMPLOYEE\" && localStorage.getItem(\"roles\")!==\"ADMIN\") && (window.location.pathname !== \"/login\" && window.location.pathname !== \"/register\" && window.location.pathname !== \"/welcome\") ){\r\n            window.location.href = \"/welcome\";\r\n\r\n            localStorage.setItem(\"jwt\",\"\");\r\n\r\n\r\n            return <div>Loading....</div>\r\n          }\r\n        }catch(error){\r\n          localStorage.setItem(\"jwt\",\"\");\r\n          \r\n          console.log(\"errorcina\");\r\n        }\r\n      }\r\nexport default Navigacija;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}