{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Win11\\\\Desktop\\\\FER\\\\GitHub\\\\Teletabisi\\\\IzvorniKod\\\\Reactic\\\\src\\\\services\\\\navigate.js\";\nimport React from 'react';\nimport LogOut from './LogOut';\nimport { jwtDecode } from 'jwt-decode';\nimport { useLocalState } from '../util/useLocalStorage';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Navigacija(jwt) {\n  try {\n    if (jwt) {\n      const decoded = jwtDecode(jwt);\n      const roles = decoded.roles;\n      if (roles && roles.length > 0) {\n        const role = roles[0];\n        localStorage.setItem(\"roles\", role);\n        // console.log(\"role :\" + role);\n      } else {\n        // console.log(\"No roles found in token\");\n        localStorage.setItem(\"roles\", \"no role\"); // remove roles from localStorage\n      }\n    } else {\n      localStorage.setItem(\"roles\", \"no role\"); // remove roles from localStorage\n    }\n\n    // console.log(\"roles:\" + localStorage.getItem(\"roles\"));\n    // console.log(\"path:\" + window.location.pathname);\n\n    if (localStorage.getItem(\"roles\") === \"ADMIN\" && window.location.pathname !== \"/admin\") {\n      window.location.href = \"/admin\";\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"Loading....\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 14\n      }, this);\n    }\n    if (localStorage.getItem(\"roles\") === \"USER\" && (window.location.pathname !== \"/user\" || window.location.pathname === \"/welcome\")) {\n      window.location.href = \"/user\";\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"Loading....\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 14\n      }, this);\n    }\n    if (localStorage.getItem(\"roles\") === \"EMPLOYEE\" && window.location.pathname !== \"/employee\") {\n      window.location.href = \"/employee\";\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"Loading....\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 14\n      }, this);\n    }\n    if (localStorage.getItem(\"roles\") !== \"USER\" && localStorage.getItem(\"roles\") !== \"EMPLOYEE\" && localStorage.getItem(\"roles\") !== \"ADMIN\" && window.location.pathname !== \"/login\" && window.location.pathname !== \"/register\" && window.location.pathname !== \"/welcome\") {\n      window.location.href = \"/welcome\";\n      localStorage.setItem(\"jwt\", \"\");\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"Loading....\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 14\n      }, this);\n    }\n  } catch (error) {\n    localStorage.setItem(\"jwt\", \"\");\n\n    //   console.log(\"errorcina\");\n  }\n}\n_c = Navigacija;\nexport default Navigacija;\nvar _c;\n$RefreshReg$(_c, \"Navigacija\");","map":{"version":3,"names":["React","LogOut","jwtDecode","useLocalState","jsxDEV","_jsxDEV","Navigacija","jwt","decoded","roles","length","role","localStorage","setItem","getItem","window","location","pathname","href","children","fileName","_jsxFileName","lineNumber","columnNumber","error","_c","$RefreshReg$"],"sources":["C:/Users/Win11/Desktop/FER/GitHub/Teletabisi/IzvorniKod/Reactic/src/services/navigate.js"],"sourcesContent":["import React from 'react';\r\nimport LogOut from './LogOut';\r\nimport { jwtDecode } from 'jwt-decode';\r\nimport { useLocalState } from '../util/useLocalStorage';\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nfunction Navigacija(jwt) {\r\n\r\n\r\n\r\n  try {\r\n\r\n\r\n    if (jwt) {\r\n      const decoded = jwtDecode(jwt);\r\n      const roles = decoded.roles;\r\n\r\n      if (roles && roles.length > 0) {\r\n        const role = roles[0];\r\n        localStorage.setItem(\"roles\", role);\r\n        // console.log(\"role :\" + role);\r\n      } else {\r\n        // console.log(\"No roles found in token\");\r\n        localStorage.setItem(\"roles\", \"no role\"); // remove roles from localStorage\r\n      }\r\n    } else {\r\n      localStorage.setItem(\"roles\", \"no role\"); // remove roles from localStorage\r\n    }\r\n\r\n    // console.log(\"roles:\" + localStorage.getItem(\"roles\"));\r\n    // console.log(\"path:\" + window.location.pathname);\r\n\r\n    if (localStorage.getItem(\"roles\") === \"ADMIN\" && window.location.pathname !== \"/admin\") {\r\n      window.location.href = \"/admin\";\r\n\r\n\r\n      return <div>Loading....</div>\r\n    }\r\n    if (localStorage.getItem(\"roles\") === \"USER\" && (window.location.pathname !== \"/user\" || window.location.pathname === \"/welcome\")) {\r\n      window.location.href = \"/user\";\r\n\r\n\r\n      return <div>Loading....</div>\r\n    }\r\n\r\n    if (localStorage.getItem(\"roles\") === \"EMPLOYEE\" && window.location.pathname !== \"/employee\") {\r\n      window.location.href = \"/employee\";\r\n\r\n\r\n      return <div>Loading....</div>\r\n    }\r\n\r\n\r\n\r\n\r\n    if ((localStorage.getItem(\"roles\") !== \"USER\" && localStorage.getItem(\"roles\") !== \"EMPLOYEE\" && localStorage.getItem(\"roles\") !== \"ADMIN\") && (window.location.pathname !== \"/login\" && window.location.pathname !== \"/register\" && window.location.pathname !== \"/welcome\")) {\r\n      window.location.href = \"/welcome\";\r\n\r\n      localStorage.setItem(\"jwt\", \"\");\r\n\r\n\r\n      return <div>Loading....</div>\r\n    }\r\n  } catch (error) {\r\n    localStorage.setItem(\"jwt\", \"\");\r\n\r\n    //   console.log(\"errorcina\");\r\n  }\r\n}\r\nexport default Navigacija;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}