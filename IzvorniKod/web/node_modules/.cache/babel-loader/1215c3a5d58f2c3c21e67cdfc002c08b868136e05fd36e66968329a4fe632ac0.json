{"ast":null,"code":"import React from'react';import{useLocalState}from'../util/useLocalStorage';import{useEffect,useState}from'react';import{LogOut}from'../services/LogOut';import Settings from'../Settings';import{jwtDecode}from\"jwt-decode\";import{Button,Form,Row,Col,Container,Navbar,Nav,InputGroup,ButtonGroup,FormLabel,ToggleButton,ToggleButtonGroup,NavbarText,NavDropdown}from'react-bootstrap';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const User=()=>{const[jwt,setJwt]=useLocalState(\"\",\"jwt\");const[roles,setRoles]=useLocalState(UseGetRoleFromJWT);if(jwt){try{const decoded=jwtDecode(jwt);console.log(decoded.authorities);console.log(\"Ovo vracas:\"+decoded.roles[0].authority);if(decoded.roles[0].authority===\"ADMIN\"){window.location.href=\"/admin\";return/*#__PURE__*/_jsx(\"div\",{children:\"Loading....\"});}else if(decoded.roles[0].authority!==\"USER\"){window.location.href=\"/welcome\";return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});}}catch(error){window.location.href=\"/welcome\";return/*#__PURE__*/_jsx(\"div\",{children:\"Loading....\"});}}function UseGetRoleFromJWT(){if(jwt){const decoded=jwtDecode(jwt);console.log(decoded.authorities);return decoded.roles[0].authority;}else{return\"\";}}console.log(\"idem dalje\");return/*#__PURE__*/_jsx(Container,{className:\"justify-content-md-center\",children:/*#__PURE__*/_jsx(Navbar,{bg:\"dark\",\"data-bs-theme\":\"dark\",fixed:\"top\",children:/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(Col,{xs:1,children:/*#__PURE__*/_jsx(Navbar.Brand,{href:\"#\",children:/*#__PURE__*/_jsx(\"img\",{src:\"/logofr.jpeg\",width:\"150\",height:\"75\",className:\"d-inline-block align-items-start rounded\",alt:\"logo\"})})}),/*#__PURE__*/_jsxs(Col,{xs:8,children:[/*#__PURE__*/_jsx(Navbar.Toggle,{\"aria-controls\":\"basic-navbar-nav\"}),/*#__PURE__*/_jsx(Navbar.Collapse,{id:\"basic-navbar-nav\",className:\"justify-content-center\",children:/*#__PURE__*/_jsx(Navbar.Brand,{children:\"Pacijent\"})})]}),/*#__PURE__*/_jsx(Col,{xs:1,children:/*#__PURE__*/_jsx(Navbar.Collapse,{className:\"justify-content-end\",children:/*#__PURE__*/_jsx(Nav,{children:/*#__PURE__*/_jsxs(NavDropdown,{title:\"Opcije\",id:\"basic-nav-dropdown\",children:[/*#__PURE__*/_jsx(NavDropdown.Item,{onClick:()=>window.location.href=\"/settings\",children:\"Postavke\"}),/*#__PURE__*/_jsx(NavDropdown.Divider,{}),/*#__PURE__*/_jsx(NavDropdown.Item,{onClick:()=>LogOut(),children:\"Odjavi se\"})]})})})})]})})});};export default User;","map":{"version":3,"names":["React","useLocalState","useEffect","useState","LogOut","Settings","jwtDecode","Button","Form","Row","Col","Container","Navbar","Nav","InputGroup","ButtonGroup","FormLabel","ToggleButton","ToggleButtonGroup","NavbarText","NavDropdown","jsx","_jsx","jsxs","_jsxs","User","jwt","setJwt","roles","setRoles","UseGetRoleFromJWT","decoded","console","log","authorities","authority","window","location","href","children","error","className","bg","fixed","xs","Brand","src","width","height","alt","Toggle","Collapse","id","title","Item","onClick","Divider"],"sources":["C:/Users/npral/OneDrive/Radna povrÅ¡ina/Spring/web/src/User/index.js"],"sourcesContent":["import React from 'react';\r\nimport { useLocalState } from '../util/useLocalStorage';\r\nimport { useEffect, useState } from 'react';\r\nimport { LogOut } from '../services/LogOut';\r\nimport Settings from '../Settings';\r\nimport { jwtDecode } from \"jwt-decode\";\r\nimport {\r\n  Button, Form, Row, Col, Container, Navbar,\r\n  Nav, InputGroup, ButtonGroup, FormLabel, ToggleButton, ToggleButtonGroup,\r\n  NavbarText, NavDropdown\r\n} from 'react-bootstrap';\r\n\r\n\r\n\r\n\r\n\r\nconst User = () => {\r\n  const [jwt, setJwt] = useLocalState(\"\", \"jwt\");\r\n  const [roles, setRoles] = useLocalState(UseGetRoleFromJWT);\r\n  if (jwt) {\r\n    try {\r\n      const decoded = jwtDecode(jwt);\r\n\r\n      console.log(decoded.authorities);\r\n      console.log(\"Ovo vracas:\" + decoded.roles[0].authority);\r\n      if (decoded.roles[0].authority === \"ADMIN\") {\r\n        window.location.href = \"/admin\";\r\n        return <div>Loading....</div>\r\n\r\n      } else if (decoded.roles[0].authority !== \"USER\") {\r\n        window.location.href = \"/welcome\";\r\n        return <div>Loading...</div>\r\n\r\n      }\r\n    }\r\n    catch (error) {\r\n      window.location.href = \"/welcome\";\r\n      return <div>Loading....</div>\r\n    }\r\n  }\r\n\r\n  function UseGetRoleFromJWT() {\r\n    if (jwt) {\r\n      const decoded = jwtDecode(jwt);\r\n      console.log(decoded.authorities);\r\n\r\n      return decoded.roles[0].authority;\r\n    }\r\n    else {\r\n      return \"\";\r\n    }\r\n  }\r\n\r\n  console.log(\"idem dalje\");\r\n\r\n\r\n\r\n\r\n  return (\r\n\r\n    <Container className=\"justify-content-md-center\">\r\n      <Navbar bg=\"dark\" data-bs-theme=\"dark\" fixed=\"top\">\r\n        <Container>\r\n          <Col xs={1}>\r\n            <Navbar.Brand href=\"#\">\r\n              <img\r\n                src=\"/logofr.jpeg\"\r\n                width=\"150\"\r\n                height=\"75\"\r\n\r\n                className=\"d-inline-block align-items-start rounded\"\r\n                alt=\"logo\"\r\n              />\r\n            </Navbar.Brand>\r\n          </Col>\r\n          <Col xs={8}>\r\n            <Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\r\n            <Navbar.Collapse id=\"basic-navbar-nav\" className=\"justify-content-center\">\r\n              <Navbar.Brand>Pacijent</Navbar.Brand>\r\n            </Navbar.Collapse>\r\n          </Col>\r\n          <Col xs={1}>\r\n            <Navbar.Collapse className=\"justify-content-end\">\r\n              <Nav>\r\n                <NavDropdown title=\"Opcije\" id=\"basic-nav-dropdown\">\r\n                  <NavDropdown.Item onClick={() => window.location.href = \"/settings\"}>Postavke</NavDropdown.Item>\r\n                  <NavDropdown.Divider />\r\n                  <NavDropdown.Item onClick={() => LogOut()}>Odjavi se</NavDropdown.Item>\r\n                </NavDropdown>\r\n              </Nav>\r\n            </Navbar.Collapse>\r\n          </Col>\r\n        </Container>\r\n      </Navbar>\r\n    </Container>\r\n\r\n  );\r\n};\r\n\r\nexport default User;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}